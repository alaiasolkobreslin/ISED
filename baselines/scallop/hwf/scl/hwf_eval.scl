type symbol(index: usize, symbol: String)
type length(n: usize)

rel digit = {"0", "1", "2", "3", "4", "5", "6", "7", "8", "9"}

type factor(value: f32, begin: usize, end: usize)
rel factor(x as f32, b, b + 1) = symbol(b, x) and digit(x)

type mult_div(value: f32, begin: usize, end: usize)
rel mult_div(x, b, r) = factor(x, b, r)
rel mult_div(x * y, b, e) = mult_div(x, b, m) and symbol(m, "*") and factor(y, m + 1, e)
rel mult_div(x / y, b, e) = mult_div(x, b, m) and symbol(m, "/") and factor(y, m + 1, e)

type add_minus(value: f32, begin: usize, end: usize)
rel add_minus(x, b, r) = mult_div(x, b, r)
rel add_minus(x + y, b, e) = add_minus(x, b, m) and symbol(m, "+") and mult_div(y, m + 1, e)
rel add_minus(x - y, b, e) = add_minus(x, b, m) and symbol(m, "-") and mult_div(y, m + 1, e)

type result(value: f32)
rel result(y) = add_minus(y, 0, l) and length(l)

query result
